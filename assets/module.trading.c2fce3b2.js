import{g as U}from"./index.2d9ac2c0.js";import{t as S,a as V,c as O,d as $,e as L}from"./main.ab319a9a.js";var T="/assets/icon_account.43cd7ea6.svg",W="/assets/icon_bch.05e082f5.svg",z="/assets/icon_btc.a9039755.svg",F="/assets/icon_dash.05bda112.svg",H="/assets/icon_eth.dac179e4.svg",J="/assets/icon_info.0c62288e.svg",X="/assets/icon_refresh.88ebef3c.svg",Y=20,Z=1,p=1e6,R=1e6,G=-7,K=21,Q=!1,k="[big.js] ",w=k+"Invalid ",C=w+"decimal places",y=w+"rounding mode",q=k+"Division by zero",f={},v=void 0,ee=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function j(){function e(t){var r=this;if(!(r instanceof e))return t===v?j():new e(t);if(t instanceof e)r.s=t.s,r.e=t.e,r.c=t.c.slice();else{if(typeof t!="string"){if(e.strict===!0&&typeof t!="bigint")throw TypeError(w+"value");t=t===0&&1/t<0?"-0":String(t)}te(r,t)}r.constructor=e}return e.prototype=f,e.DP=Y,e.RM=Z,e.NE=G,e.PE=K,e.strict=Q,e.roundDown=0,e.roundHalfUp=1,e.roundHalfEven=2,e.roundUp=3,e}function te(e,t){var r,i,n;if(!ee.test(t))throw Error(w+"number");for(e.s=t.charAt(0)=="-"?(t=t.slice(1),-1):1,(r=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(r<0&&(r=i),r+=+t.slice(i+1),t=t.substring(0,i)):r<0&&(r=t.length),n=t.length,i=0;i<n&&t.charAt(i)=="0";)++i;if(i==n)e.c=[e.e=0];else{for(;n>0&&t.charAt(--n)=="0";);for(e.e=r-i-1,e.c=[],r=0;i<=n;)e.c[r++]=+t.charAt(i++)}return e}function E(e,t,r,i){var n=e.c;if(r===v&&(r=e.constructor.RM),r!==0&&r!==1&&r!==2&&r!==3)throw Error(y);if(t<1)i=r===3&&(i||!!n[0])||t===0&&(r===1&&n[0]>=5||r===2&&(n[0]>5||n[0]===5&&(i||n[1]!==v))),n.length=1,i?(e.e=e.e-t+1,n[0]=1):n[0]=e.e=0;else if(t<n.length){if(i=r===1&&n[t]>=5||r===2&&(n[t]>5||n[t]===5&&(i||n[t+1]!==v||n[t-1]&1))||r===3&&(i||!!n[0]),n.length=t--,i)for(;++n[t]>9;)n[t]=0,t--||(++e.e,n.unshift(1));for(t=n.length;!n[--t];)n.pop()}return e}function _(e,t,r){var i=e.e,n=e.c.join(""),o=n.length;if(t)n=n.charAt(0)+(o>1?"."+n.slice(1):"")+(i<0?"e":"e+")+i;else if(i<0){for(;++i;)n="0"+n;n="0."+n}else if(i>0)if(++i>o)for(i-=o;i--;)n+="0";else i<o&&(n=n.slice(0,i)+"."+n.slice(i));else o>1&&(n=n.charAt(0)+"."+n.slice(1));return e.s<0&&r?"-"+n:n}f.abs=function(){var e=new this.constructor(this);return e.s=1,e};f.cmp=function(e){var t,r=this,i=r.c,n=(e=new r.constructor(e)).c,o=r.s,a=e.s,s=r.e,l=e.e;if(!i[0]||!n[0])return i[0]?o:n[0]?-a:0;if(o!=a)return o;if(t=o<0,s!=l)return s>l^t?1:-1;for(a=(s=i.length)<(l=n.length)?s:l,o=-1;++o<a;)if(i[o]!=n[o])return i[o]>n[o]^t?1:-1;return s==l?0:s>l^t?1:-1};f.div=function(e){var t=this,r=t.constructor,i=t.c,n=(e=new r(e)).c,o=t.s==e.s?1:-1,a=r.DP;if(a!==~~a||a<0||a>p)throw Error(C);if(!n[0])throw Error(q);if(!i[0])return e.s=o,e.c=[e.e=0],e;var s,l,c,m,u,g=n.slice(),I=s=n.length,B=i.length,h=i.slice(0,s),d=h.length,b=e,P=b.c=[],A=0,N=a+(b.e=t.e-e.e)+1;for(b.s=o,o=N<0?0:N,g.unshift(0);d++<s;)h.push(0);do{for(c=0;c<10;c++){if(s!=(d=h.length))m=s>d?1:-1;else for(u=-1,m=0;++u<s;)if(n[u]!=h[u]){m=n[u]>h[u]?1:-1;break}if(m<0){for(l=d==s?n:g;d;){if(h[--d]<l[d]){for(u=d;u&&!h[--u];)h[u]=9;--h[u],h[d]+=10}h[d]-=l[d]}for(;!h[0];)h.shift()}else break}P[A++]=m?c:++c,h[0]&&m?h[d]=i[I]||0:h=[i[I]]}while((I++<B||h[0]!==v)&&o--);return!P[0]&&A!=1&&(P.shift(),b.e--,N--),A>N&&E(b,N,r.RM,h[0]!==v),b};f.eq=function(e){return this.cmp(e)===0};f.gt=function(e){return this.cmp(e)>0};f.gte=function(e){return this.cmp(e)>-1};f.lt=function(e){return this.cmp(e)<0};f.lte=function(e){return this.cmp(e)<1};f.minus=f.sub=function(e){var t,r,i,n,o=this,a=o.constructor,s=o.s,l=(e=new a(e)).s;if(s!=l)return e.s=-l,o.plus(e);var c=o.c.slice(),m=o.e,u=e.c,g=e.e;if(!c[0]||!u[0])return u[0]?e.s=-l:c[0]?e=new a(o):e.s=1,e;if(s=m-g){for((n=s<0)?(s=-s,i=c):(g=m,i=u),i.reverse(),l=s;l--;)i.push(0);i.reverse()}else for(r=((n=c.length<u.length)?c:u).length,s=l=0;l<r;l++)if(c[l]!=u[l]){n=c[l]<u[l];break}if(n&&(i=c,c=u,u=i,e.s=-e.s),(l=(r=u.length)-(t=c.length))>0)for(;l--;)c[t++]=0;for(l=t;r>s;){if(c[--r]<u[r]){for(t=r;t&&!c[--t];)c[t]=9;--c[t],c[r]+=10}c[r]-=u[r]}for(;c[--l]===0;)c.pop();for(;c[0]===0;)c.shift(),--g;return c[0]||(e.s=1,c=[g=0]),e.c=c,e.e=g,e};f.mod=function(e){var t,r=this,i=r.constructor,n=r.s,o=(e=new i(e)).s;if(!e.c[0])throw Error(q);return r.s=e.s=1,t=e.cmp(r)==1,r.s=n,e.s=o,t?new i(r):(n=i.DP,o=i.RM,i.DP=i.RM=0,r=r.div(e),i.DP=n,i.RM=o,this.minus(r.times(e)))};f.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e};f.plus=f.add=function(e){var t,r,i,n=this,o=n.constructor;if(e=new o(e),n.s!=e.s)return e.s=-e.s,n.minus(e);var a=n.e,s=n.c,l=e.e,c=e.c;if(!s[0]||!c[0])return c[0]||(s[0]?e=new o(n):e.s=n.s),e;if(s=s.slice(),t=a-l){for(t>0?(l=a,i=c):(t=-t,i=s),i.reverse();t--;)i.push(0);i.reverse()}for(s.length-c.length<0&&(i=c,c=s,s=i),t=c.length,r=0;t;s[t]%=10)r=(s[--t]=s[t]+c[t]+r)/10|0;for(r&&(s.unshift(r),++l),t=s.length;s[--t]===0;)s.pop();return e.c=s,e.e=l,e};f.pow=function(e){var t=this,r=new t.constructor("1"),i=r,n=e<0;if(e!==~~e||e<-R||e>R)throw Error(w+"exponent");for(n&&(e=-e);e&1&&(i=i.times(t)),e>>=1,!!e;)t=t.times(t);return n?r.div(i):i};f.prec=function(e,t){if(e!==~~e||e<1||e>p)throw Error(w+"precision");return E(new this.constructor(this),e,t)};f.round=function(e,t){if(e===v)e=0;else if(e!==~~e||e<-p||e>p)throw Error(C);return E(new this.constructor(this),e+this.e+1,t)};f.sqrt=function(){var e,t,r,i=this,n=i.constructor,o=i.s,a=i.e,s=new n("0.5");if(!i.c[0])return new n(i);if(o<0)throw Error(k+"No square root");o=Math.sqrt(i+""),o===0||o===1/0?(t=i.c.join(""),t.length+a&1||(t+="0"),o=Math.sqrt(t),a=((a+1)/2|0)-(a<0||a&1),e=new n((o==1/0?"5e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+a)):e=new n(o+""),a=e.e+(n.DP+=4);do r=e,e=s.times(r.plus(i.div(r)));while(r.c.slice(0,a).join("")!==e.c.slice(0,a).join(""));return E(e,(n.DP-=4)+e.e+1,n.RM)};f.times=f.mul=function(e){var t,r=this,i=r.constructor,n=r.c,o=(e=new i(e)).c,a=n.length,s=o.length,l=r.e,c=e.e;if(e.s=r.s==e.s?1:-1,!n[0]||!o[0])return e.c=[e.e=0],e;for(e.e=l+c,a<s&&(t=n,n=o,o=t,c=a,a=s,s=c),t=new Array(c=a+s);c--;)t[c]=0;for(l=s;l--;){for(s=0,c=a+l;c>l;)s=t[c]+o[l]*n[c-l-1]+s,t[c--]=s%10,s=s/10|0;t[c]=s}for(s?++e.e:t.shift(),l=t.length;!t[--l];)t.pop();return e.c=t,e};f.toExponential=function(e,t){var r=this,i=r.c[0];if(e!==v){if(e!==~~e||e<0||e>p)throw Error(C);for(r=E(new r.constructor(r),++e,t);r.c.length<e;)r.c.push(0)}return _(r,!0,!!i)};f.toFixed=function(e,t){var r=this,i=r.c[0];if(e!==v){if(e!==~~e||e<0||e>p)throw Error(C);for(r=E(new r.constructor(r),e+r.e+1,t),e=e+r.e+1;r.c.length<e;)r.c.push(0)}return _(r,!1,!!i)};f[Symbol.for("nodejs.util.inspect.custom")]=f.toJSON=f.toString=function(){var e=this,t=e.constructor;return _(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])};f.toNumber=function(){var e=Number(_(this,!0,!0));if(this.constructor.strict===!0&&!this.eq(e.toString()))throw Error(k+"Imprecise conversion");return e};f.toPrecision=function(e,t){var r=this,i=r.constructor,n=r.c[0];if(e!==v){if(e!==~~e||e<1||e>p)throw Error(w+"precision");for(r=E(new i(r),e,t);r.c.length<e;)r.c.push(0)}return _(r,e<=r.e||r.e<=i.NE||r.e>=i.PE,!!n)};f.valueOf=function(){var e=this,t=e.constructor;if(t.strict===!0)throw Error(k+"valueOf disallowed");return _(e,e.e<=t.NE||e.e>=t.PE,!0)};var re=j();const x=new Web3(window.ethereum),D=async(e,t,r)=>{const n=await(await fetch(t)).json();return new e.eth.Contract(n.abi,r)},M=async e=>{const t=new URL("/src/json/Moret.json",self.location),r=new URL("/src/json/VolatilityChain.json",self.location),n=await(await D(x,t,"0x8f529633a6736E348a4F97E8E050C3EEd78C3C0a")).methods.getVolatilityChain(String(e)).call(),a=await(await D(x,r,n)).methods.queryPrice().call();return`$${re(x.utils.fromWei(a)).round(2).toNumber()}`};var oe={globals:{elem:document.querySelector(".trading")},init(){this.sideNav(),this.animateEachPanel()},sideNav(){const e=this.globals.elem.querySelector(".sidenav");e.textContent="";const t=document.createElement("div");t.className="token-main",e.appendChild(t);const r=document.createElement("div");r.className="token-info",t.appendChild(r);const i=document.createElement("div");i.className="token-arrow",t.appendChild(i);const n=document.createElement("div");n.className="token-contents",e.appendChild(n);const o=document.createElement("div");o.className="token-list",n.appendChild(o);const a=document.createElement("div");a.className="token-info",o.appendChild(a),this.sideNavItem(r,{token:S(),price:V(),address:O()},!1),$.forEach((s,l)=>{s.token!==S()&&this.sideNavItem(a,s)}),this.sideNavRefreshPrice(e),this.sideNavLimiteView(e)},sideNavSearch(e){const t=document.createElement("div");t.className="input-search",e.appendChild(t);const r=document.createElement("input");r.setAttribute("type","search"),r.setAttribute("name","s"),r.setAttribute("placeholder","Search"),r.className="size-sm",t.appendChild(r)},async sideNavItem(e,t,r=!0){const i=document.createElement("div");i.className="info-item",e.appendChild(i);const n=document.createElement("div");n.className="token-content-wrapper",i.appendChild(n);const o=document.createElement("div");o.className="token-content",n.appendChild(o);const a=document.createElement("div");a.className="token-icon",o.appendChild(a);const s=document.createElement("img"),l=new URL({"/src/img/icon_account.svg":T,"/src/img/icon_bch.svg":W,"/src/img/icon_btc.svg":z,"/src/img/icon_dash.svg":F,"/src/img/icon_eth.svg":H,"/src/img/icon_info.svg":J,"/src/img/icon_refresh.svg":X}[`/src/img/icon_${t.token.toLowerCase()}.svg`],self.location);s.src=l,a.appendChild(s);const c=document.createElement("div");c.className="token-name",c.textContent=`${t.token} - ${t.price}`,o.appendChild(c);const m=document.createElement("div");m.className="token-price align-right",m.setAttribute("data-address",t.address),m.textContent=await M(t.address),i.appendChild(m),r&&i.addEventListener("click",()=>{localStorage.removeItem(L),localStorage.setItem(L,JSON.stringify(t)),this.sideNav()})},sideNavRefreshPrice(e){let t=null;const r=()=>{t=setInterval(()=>{e.querySelectorAll(".token-price").forEach(async n=>{n.textContent=await M(n.dataset.address)})},15e3)},i=()=>{clearInterval(t),t=null};r(),document.addEventListener("visibilitychange",()=>{document.hidden?i():r()})},sideNavLimiteView(e){const t=e.querySelector(".token-arrow"),r=e.querySelector(".token-list"),i=r.querySelectorAll(".info-item"),n=3;if(t.addEventListener("click",()=>{e.classList.contains("sidenav-mobile-active")?e.classList.remove("sidenav-mobile-active"):e.classList.add("sidenav-mobile-active")},!1),i.forEach((o,a)=>{a>n-1&&o.classList.add("hide-important")}),i.length>n){const o=document.createElement("div");o.className="token-viewmore",r.appendChild(o);const a=document.createElement("a");a.setAttribute("href","#"),a.className="btn btn-white btn-viewmore size-sm",a.textContent="View more",o.appendChild(a),a.addEventListener("click",s=>{s.preventDefault(),i.forEach(l=>l.classList.remove("hide-important")),o.remove()},!1)}},animateEachPanel(){this.globals.elem.querySelectorAll(".animate-panel").forEach((e,t)=>{const r=new IntersectionObserver(i=>{i.forEach(n=>{n.intersectionRatio&&(e.style.opacity=1,U.timeline().from(e,{opacity:0,y:200,delay:t*.1}),r.unobserve(n.target))})},{threshold:.25});r.observe(e)})}};export{oe as default};
