import{c as a,m as s,s as i,a as l,w as r}from"./main.17cc1fff.js";var g={init(){this.accountsConnect(),this.accountsChanged(),this.chainChanged(),this.isPolygonNetwork()},async connectMetaMask(t){t.textContent="Requesting...";try{await window.ethereum.request({method:"eth_requestAccounts"}).then(e=>{a(),this.accountsConnect()}).catch(e=>{throw console.log("eth_requestAccounts error",e),e})}catch(e){console.log("error",e)}},accountsConnect(){window.ethereum.request({method:"eth_accounts"}).then(t=>{const e=document.querySelector(".connection-button");if(e)if(t.length>0){e.textContent="";const n=document.createElement("div");n.className="in-border white-50 icon icon-account active-account",n.textContent=`${s(t)}`,e.appendChild(n)}else{const n=document.createElement("div");n.className="button",e.appendChild(n);const o=document.createElement("a");o.setAttribute("href","#"),o.className="btn btn-blue js-connectWallet",o.textContent="Connect wallet",n.appendChild(o),o.addEventListener("click",h=>{h.preventDefault(),i("Connect Wallet",l([{name:"Metamask"},{name:"Walletconnect"},{name:"Coinbase"}],"connectwallets")),document.querySelectorAll(".overlay-popup .connectwallets li").forEach(c=>{c.addEventListener("click",u=>{switch(u.target.className){case"metamask":this.connectMetaMask(c);break}},!1)})},!1)}}).catch(t=>{throw console.log("eth_accounts error",t),t})},accountsChanged(){window.ethereum.on("accountsChanged",t=>{this.isPolygonNetwork();const e=document.querySelector("header .active-account");t.length>0&&e&&(e.textContent=`${s(t)}`),location.reload()})},chainChanged(){window.ethereum.on("chainChanged",t=>{this.isPolygonNetwork()})},async isPolygonNetwork(){if((await r.eth.getAccounts()).length>0){const e=await r.eth.getChainId();Number(e)===137?a():i(null,l([{name:"",class:"warning-icon"},{name:"Please switch to Polygon chain.",class:"warning-text size-lgmd"}],"notpolygon"),!1)}}};export{g as default};
