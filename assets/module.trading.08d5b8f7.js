import{g as V}from"./index.2d9ac2c0.js";import{g as S,t as D,a as U,c as $,d as T,e as L}from"./main.8f70cf01.js";var W="/assets/icon_account.43cd7ea6.svg",z="/assets/icon_bch.05e082f5.svg",F="/assets/icon_btc.a9039755.svg",J="/assets/icon_dash.05bda112.svg",H="/assets/icon_eth.dac179e4.svg",X="/assets/icon_info.0c62288e.svg",Y="/assets/icon_refresh.88ebef3c.svg",Z=20,G=1,p=1e6,M=1e6,K=-7,Q=21,y=!1,k="[big.js] ",w=k+"Invalid ",C=w+"decimal places",ee=w+"rounding mode",B=k+"Division by zero",f={},v=void 0,te=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function j(){function e(t){var r=this;if(!(r instanceof e))return t===v?j():new e(t);if(t instanceof e)r.s=t.s,r.e=t.e,r.c=t.c.slice();else{if(typeof t!="string"){if(e.strict===!0&&typeof t!="bigint")throw TypeError(w+"value");t=t===0&&1/t<0?"-0":String(t)}re(r,t)}r.constructor=e}return e.prototype=f,e.DP=Z,e.RM=G,e.NE=K,e.PE=Q,e.strict=y,e.roundDown=0,e.roundHalfUp=1,e.roundHalfEven=2,e.roundUp=3,e}function re(e,t){var r,n,i;if(!te.test(t))throw Error(w+"number");for(e.s=t.charAt(0)=="-"?(t=t.slice(1),-1):1,(r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),i=t.length,n=0;n<i&&t.charAt(n)=="0";)++n;if(n==i)e.c=[e.e=0];else{for(;i>0&&t.charAt(--i)=="0";);for(e.e=r-n-1,e.c=[],r=0;n<=i;)e.c[r++]=+t.charAt(n++)}return e}function E(e,t,r,n){var i=e.c;if(r===v&&(r=e.constructor.RM),r!==0&&r!==1&&r!==2&&r!==3)throw Error(ee);if(t<1)n=r===3&&(n||!!i[0])||t===0&&(r===1&&i[0]>=5||r===2&&(i[0]>5||i[0]===5&&(n||i[1]!==v))),i.length=1,n?(e.e=e.e-t+1,i[0]=1):i[0]=e.e=0;else if(t<i.length){if(n=r===1&&i[t]>=5||r===2&&(i[t]>5||i[t]===5&&(n||i[t+1]!==v||i[t-1]&1))||r===3&&(n||!!i[0]),i.length=t--,n)for(;++i[t]>9;)i[t]=0,t--||(++e.e,i.unshift(1));for(t=i.length;!i[--t];)i.pop()}return e}function _(e,t,r){var n=e.e,i=e.c.join(""),s=i.length;if(t)i=i.charAt(0)+(s>1?"."+i.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)i="0"+i;i="0."+i}else if(n>0)if(++n>s)for(n-=s;n--;)i+="0";else n<s&&(i=i.slice(0,n)+"."+i.slice(n));else s>1&&(i=i.charAt(0)+"."+i.slice(1));return e.s<0&&r?"-"+i:i}f.abs=function(){var e=new this.constructor(this);return e.s=1,e};f.cmp=function(e){var t,r=this,n=r.c,i=(e=new r.constructor(e)).c,s=r.s,a=e.s,o=r.e,l=e.e;if(!n[0]||!i[0])return n[0]?s:i[0]?-a:0;if(s!=a)return s;if(t=s<0,o!=l)return o>l^t?1:-1;for(a=(o=n.length)<(l=i.length)?o:l,s=-1;++s<a;)if(n[s]!=i[s])return n[s]>i[s]^t?1:-1;return o==l?0:o>l^t?1:-1};f.div=function(e){var t=this,r=t.constructor,n=t.c,i=(e=new r(e)).c,s=t.s==e.s?1:-1,a=r.DP;if(a!==~~a||a<0||a>p)throw Error(C);if(!i[0])throw Error(B);if(!n[0])return e.s=s,e.c=[e.e=0],e;var o,l,c,m,u,g=i.slice(),I=o=i.length,O=n.length,h=n.slice(0,o),d=h.length,b=e,P=b.c=[],A=0,N=a+(b.e=t.e-e.e)+1;for(b.s=s,s=N<0?0:N,g.unshift(0);d++<o;)h.push(0);do{for(c=0;c<10;c++){if(o!=(d=h.length))m=o>d?1:-1;else for(u=-1,m=0;++u<o;)if(i[u]!=h[u]){m=i[u]>h[u]?1:-1;break}if(m<0){for(l=d==o?i:g;d;){if(h[--d]<l[d]){for(u=d;u&&!h[--u];)h[u]=9;--h[u],h[d]+=10}h[d]-=l[d]}for(;!h[0];)h.shift()}else break}P[A++]=m?c:++c,h[0]&&m?h[d]=n[I]||0:h=[n[I]]}while((I++<O||h[0]!==v)&&s--);return!P[0]&&A!=1&&(P.shift(),b.e--,N--),A>N&&E(b,N,r.RM,h[0]!==v),b};f.eq=function(e){return this.cmp(e)===0};f.gt=function(e){return this.cmp(e)>0};f.gte=function(e){return this.cmp(e)>-1};f.lt=function(e){return this.cmp(e)<0};f.lte=function(e){return this.cmp(e)<1};f.minus=f.sub=function(e){var t,r,n,i,s=this,a=s.constructor,o=s.s,l=(e=new a(e)).s;if(o!=l)return e.s=-l,s.plus(e);var c=s.c.slice(),m=s.e,u=e.c,g=e.e;if(!c[0]||!u[0])return u[0]?e.s=-l:c[0]?e=new a(s):e.s=1,e;if(o=m-g){for((i=o<0)?(o=-o,n=c):(g=m,n=u),n.reverse(),l=o;l--;)n.push(0);n.reverse()}else for(r=((i=c.length<u.length)?c:u).length,o=l=0;l<r;l++)if(c[l]!=u[l]){i=c[l]<u[l];break}if(i&&(n=c,c=u,u=n,e.s=-e.s),(l=(r=u.length)-(t=c.length))>0)for(;l--;)c[t++]=0;for(l=t;r>o;){if(c[--r]<u[r]){for(t=r;t&&!c[--t];)c[t]=9;--c[t],c[r]+=10}c[r]-=u[r]}for(;c[--l]===0;)c.pop();for(;c[0]===0;)c.shift(),--g;return c[0]||(e.s=1,c=[g=0]),e.c=c,e.e=g,e};f.mod=function(e){var t,r=this,n=r.constructor,i=r.s,s=(e=new n(e)).s;if(!e.c[0])throw Error(B);return r.s=e.s=1,t=e.cmp(r)==1,r.s=i,e.s=s,t?new n(r):(i=n.DP,s=n.RM,n.DP=n.RM=0,r=r.div(e),n.DP=i,n.RM=s,this.minus(r.times(e)))};f.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e};f.plus=f.add=function(e){var t,r,n,i=this,s=i.constructor;if(e=new s(e),i.s!=e.s)return e.s=-e.s,i.minus(e);var a=i.e,o=i.c,l=e.e,c=e.c;if(!o[0]||!c[0])return c[0]||(o[0]?e=new s(i):e.s=i.s),e;if(o=o.slice(),t=a-l){for(t>0?(l=a,n=c):(t=-t,n=o),n.reverse();t--;)n.push(0);n.reverse()}for(o.length-c.length<0&&(n=c,c=o,o=n),t=c.length,r=0;t;o[t]%=10)r=(o[--t]=o[t]+c[t]+r)/10|0;for(r&&(o.unshift(r),++l),t=o.length;o[--t]===0;)o.pop();return e.c=o,e.e=l,e};f.pow=function(e){var t=this,r=new t.constructor("1"),n=r,i=e<0;if(e!==~~e||e<-M||e>M)throw Error(w+"exponent");for(i&&(e=-e);e&1&&(n=n.times(t)),e>>=1,!!e;)t=t.times(t);return i?r.div(n):n};f.prec=function(e,t){if(e!==~~e||e<1||e>p)throw Error(w+"precision");return E(new this.constructor(this),e,t)};f.round=function(e,t){if(e===v)e=0;else if(e!==~~e||e<-p||e>p)throw Error(C);return E(new this.constructor(this),e+this.e+1,t)};f.sqrt=function(){var e,t,r,n=this,i=n.constructor,s=n.s,a=n.e,o=new i("0.5");if(!n.c[0])return new i(n);if(s<0)throw Error(k+"No square root");s=Math.sqrt(n+""),s===0||s===1/0?(t=n.c.join(""),t.length+a&1||(t+="0"),s=Math.sqrt(t),a=((a+1)/2|0)-(a<0||a&1),e=new i((s==1/0?"5e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+a)):e=new i(s+""),a=e.e+(i.DP+=4);do r=e,e=o.times(r.plus(n.div(r)));while(r.c.slice(0,a).join("")!==e.c.slice(0,a).join(""));return E(e,(i.DP-=4)+e.e+1,i.RM)};f.times=f.mul=function(e){var t,r=this,n=r.constructor,i=r.c,s=(e=new n(e)).c,a=i.length,o=s.length,l=r.e,c=e.e;if(e.s=r.s==e.s?1:-1,!i[0]||!s[0])return e.c=[e.e=0],e;for(e.e=l+c,a<o&&(t=i,i=s,s=t,c=a,a=o,o=c),t=new Array(c=a+o);c--;)t[c]=0;for(l=o;l--;){for(o=0,c=a+l;c>l;)o=t[c]+s[l]*i[c-l-1]+o,t[c--]=o%10,o=o/10|0;t[c]=o}for(o?++e.e:t.shift(),l=t.length;!t[--l];)t.pop();return e.c=t,e};f.toExponential=function(e,t){var r=this,n=r.c[0];if(e!==v){if(e!==~~e||e<0||e>p)throw Error(C);for(r=E(new r.constructor(r),++e,t);r.c.length<e;)r.c.push(0)}return _(r,!0,!!n)};f.toFixed=function(e,t){var r=this,n=r.c[0];if(e!==v){if(e!==~~e||e<0||e>p)throw Error(C);for(r=E(new r.constructor(r),e+r.e+1,t),e=e+r.e+1;r.c.length<e;)r.c.push(0)}return _(r,!1,!!n)};f[Symbol.for("nodejs.util.inspect.custom")]=f.toJSON=f.toString=function(){var e=this,t=e.constructor;return _(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])};f.toNumber=function(){var e=Number(_(this,!0,!0));if(this.constructor.strict===!0&&!this.eq(e.toString()))throw Error(k+"Imprecise conversion");return e};f.toPrecision=function(e,t){var r=this,n=r.constructor,i=r.c[0];if(e!==v){if(e!==~~e||e<1||e>p)throw Error(w+"precision");for(r=E(new n(r),e,t);r.c.length<e;)r.c.push(0)}return _(r,e<=r.e||r.e<=n.NE||r.e>=n.PE,!!i)};f.valueOf=function(){var e=this,t=e.constructor;if(t.strict===!0)throw Error(k+"valueOf disallowed");return _(e,e.e<=t.NE||e.e>=t.PE,!0)};var ie=j();const x=new Web3(window.ethereum),R=async(e,t,r)=>{const i=await(await fetch(t)).json();return new e.eth.Contract(i.abi,r)},q=async e=>{const r=await(await R(x,S("Moret.json"),"0x8f529633a6736E348a4F97E8E050C3EEd78C3C0a")).methods.getVolatilityChain(String(e)).call(),i=await(await R(x,S("VolatilityChain.json"),r)).methods.queryPrice().call();return`$${ie(x.utils.fromWei(i)).round(2).toNumber()}`};var oe={globals:{elem:document.querySelector(".trading")},init(){this.sideNav(),this.animateEachPanel()},sideNav(){const e=this.globals.elem.querySelector(".sidenav");e.textContent="";const t=document.createElement("div");t.className="token-main",e.appendChild(t);const r=document.createElement("div");r.className="token-info",t.appendChild(r);const n=document.createElement("div");n.className="token-arrow",t.appendChild(n);const i=document.createElement("div");i.className="token-contents",e.appendChild(i);const s=document.createElement("div");s.className="token-list",i.appendChild(s);const a=document.createElement("div");a.className="token-info",s.appendChild(a),this.sideNavItem(r,{token:D(),price:U(),address:$()},!1),T.forEach((o,l)=>{o.token!==D()&&this.sideNavItem(a,o)}),this.sideNavRefreshPrice(e),this.sideNavLimiteView(e)},sideNavSearch(e){const t=document.createElement("div");t.className="input-search",e.appendChild(t);const r=document.createElement("input");r.setAttribute("type","search"),r.setAttribute("name","s"),r.setAttribute("placeholder","Search"),r.className="size-sm",t.appendChild(r)},async sideNavItem(e,t,r=!0){const n=document.createElement("div");n.className="info-item",e.appendChild(n);const i=document.createElement("div");i.className="token-content-wrapper",n.appendChild(i);const s=document.createElement("div");s.className="token-content",i.appendChild(s);const a=document.createElement("div");a.className="token-icon",s.appendChild(a);const o=document.createElement("img"),l=new URL({"/src/img/icon_account.svg":W,"/src/img/icon_bch.svg":z,"/src/img/icon_btc.svg":F,"/src/img/icon_dash.svg":J,"/src/img/icon_eth.svg":H,"/src/img/icon_info.svg":X,"/src/img/icon_refresh.svg":Y}[`/src/img/icon_${t.token.toLowerCase()}.svg`],self.location);o.src=l,a.appendChild(o);const c=document.createElement("div");c.className="token-name",c.textContent=`${t.token} - ${t.price}`,s.appendChild(c);const m=document.createElement("div");m.className="token-price align-right",m.setAttribute("data-address",t.address),m.textContent=await q(t.address),n.appendChild(m),r&&n.addEventListener("click",()=>{localStorage.removeItem(L),localStorage.setItem(L,JSON.stringify(t)),this.sideNav()})},sideNavRefreshPrice(e){let t=null;const r=()=>{t=setInterval(()=>{e.querySelectorAll(".token-price").forEach(async i=>{i.textContent=await q(i.dataset.address)})},15e3)},n=()=>{clearInterval(t),t=null};r(),document.addEventListener("visibilitychange",()=>{document.hidden?n():r()})},sideNavLimiteView(e){const t=e.querySelector(".token-arrow"),r=e.querySelector(".token-list"),n=r.querySelectorAll(".info-item"),i=3;if(t.addEventListener("click",()=>{e.classList.contains("sidenav-mobile-active")?e.classList.remove("sidenav-mobile-active"):e.classList.add("sidenav-mobile-active")},!1),n.forEach((s,a)=>{a>i-1&&s.classList.add("hide-important")}),n.length>i){const s=document.createElement("div");s.className="token-viewmore",r.appendChild(s);const a=document.createElement("a");a.setAttribute("href","#"),a.className="btn btn-white btn-viewmore size-sm",a.textContent="View more",s.appendChild(a),a.addEventListener("click",o=>{o.preventDefault(),n.forEach(l=>l.classList.remove("hide-important")),s.remove()},!1)}},animateEachPanel(){this.globals.elem.querySelectorAll(".animate-panel").forEach((e,t)=>{const r=new IntersectionObserver(n=>{n.forEach(i=>{i.intersectionRatio&&(e.style.opacity=1,V.timeline().from(e,{opacity:0,y:200,delay:t*.1}),r.unobserve(i.target))})},{threshold:.25});r.observe(e)})}};export{oe as default};
