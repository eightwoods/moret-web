import{f as a,s,h as r}from"./main.d0b2d0c0.js";import{w as i}from"./web3.a3cf192a.js";var w={init(){this.accountsConnect(),this.accountsChanged(),this.chainChanged(),this.isPolygonNetwork()},async connectMetaMask(e){e.textContent="Requesting...";try{await window.ethereum.request({method:"eth_requestAccounts"}).then(t=>{a(),this.accountsConnect()}).catch(t=>{throw console.log("eth_requestAccounts error",t),t})}catch(t){console.log("error",t)}},accountsConnect(){ethereum.request({method:"eth_accounts"}).then(e=>{const t=document.querySelector(".connection-button");if(t)if(e.length>0){t.textContent="";const n=String(e),o=document.createElement("div");o.className="in-border white-50 icon icon-account active-account",o.textContent=`${n.substring(0,4)}...${n.substring(n.length-4)}`,t.appendChild(o)}else{const n=document.createElement("div");n.className="button",t.appendChild(n);const o=document.createElement("a");o.setAttribute("href","#"),o.className="btn btn-blue js-connectWallet",o.textContent="Connect wallet",n.appendChild(o),o.addEventListener("click",l=>{l.preventDefault(),s("Connect Wallet",r([{name:"Metamask"},{name:"Walletconnect"},{name:"Coinbase"}],"connectwallets")),document.querySelectorAll(".overlay-popup .connectwallets li").forEach(c=>{c.addEventListener("click",u=>{switch(u.target.className){case"metamask":this.connectMetaMask(c);break}},!1)})},!1)}}).catch(e=>{throw console.log("eth_accounts error",e),e})},accountsChanged(){window.ethereum.on("accountsChanged",e=>{this.isPolygonNetwork();const t=document.querySelector("header .active-account");if(e.length>0&&t){const n=String(e);t.textContent=`${n.substring(0,4)}...${n.substring(n.length-4)}`}else location.reload()})},chainChanged(){window.ethereum.on("chainChanged",e=>{this.isPolygonNetwork()})},async isPolygonNetwork(){if((await i.eth.getAccounts()).length>0){const t=await i.eth.getChainId();Number(t)===137?a():s(null,r([{name:"",class:"np-icon"},{name:"This is not a \u201CPolygon\u201D blockchain!",class:"np-text size-lgmd"}],"notpolygon"),!0)}}};export{w as default};
