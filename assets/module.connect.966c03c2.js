import{g as s}from"./index.2d9ac2c0.js";import{n as r}from"./main.73a72ff0.js";var m={init(){document.querySelector(".js-connectWallet").addEventListener("click",e=>{e.preventDefault();const t=["Metamask","Walletconnect","Coinbase"];this.overlayPopup("Connect Wallet",this.createList(t,"connectwallets"))},!1)},createList(l,e){const t=document.createElement("ul");t.className=e;for(const o of l){const n=document.createElement("li");n.appendChild(document.createTextNode(o)),n.className=o.toLowerCase(),t.appendChild(n),n.addEventListener("click",()=>{n.classList.contains("metamask")?(console.log("metamask"),this.connectMetaMask(n)):console.log("others...")},!1)}return t},overlayPopup(l=null,e=null){r();const t=document.createElement("div");t.className="overlay-popup",document.body.appendChild(t);const o=document.createElement("div");if(o.className="op-box",t.appendChild(o),l){const a=document.createElement("div");a.className="op-title header-title m-b-24",a.textContent=l,o.appendChild(a)}const n=document.createElement("div");n.className="op-close cursor",o.appendChild(n),n.addEventListener("click",()=>{r(!1),s.to(o,{opacity:0,scale:.5,duration:.35,onComplete:function(){t.remove()}})},!1);const c=document.createElement("div");c.className="op-content",c.appendChild(e),o.appendChild(c),s.from(o,{opacity:0,scale:.5})},async connectMetaMask(l){l.innerHTML="Requesting",l.disabled=!0;try{await window.ethereum.request({method:"eth_requestAccounts"}).then(e=>{console.log("result",e);const t=document.getElementsByClassName("op-box");s.to(t,{opacity:0,scale:.5,duration:.35,onComplete:function(){}});const o=document.getElementsByClassName("js-connectWallet");o.innerHTML="Disconnect",[].forEach.call(document.querySelectorAll(".connected"),function(n){n.style.cssText="display:inline-block !important"})}).catch(e=>{throw console.log("promise error",e),e}),await ethereum.request({method:"eth_chainId"}).then(e=>{console.log("chain",e),e==137||e==80001?l.style.backgroundColor="":(alert("You are not using Polygon chain. Please switch to Polygon network on your wallet."),console.log("Non-Polygon chain",e))})}catch(e){console.log("error",e),l.innerHTML="Connect to Wallet",l.disabled=!1}}};export{m as default};
