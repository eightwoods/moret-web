import{g as s}from"./index.2d9ac2c0.js";import{n as r}from"./main.0060d139.js";var m={init(){document.querySelector(".js-connectWallet").addEventListener("click",e=>{e.preventDefault();const o=["Metamask","Walletconnect","Coinbase"];this.overlayPopup("Connect Wallet",this.createList(o,"connectwallets"))},!1)},createList(t,e){const o=document.createElement("ul");o.className=e;for(const n of t){const l=document.createElement("li");l.appendChild(document.createTextNode(n)),l.className=n.toLowerCase(),o.appendChild(l),l.addEventListener("click",()=>{l.classList.contains("metamask")?(console.log("metamask"),this.connectMetaMask(l)):console.log("others...")},!1)}return o},overlayPopup(t=null,e=null){r();const o=document.createElement("div");o.className="overlay-popup",document.body.appendChild(o);const n=document.createElement("div");if(n.className="op-box",o.appendChild(n),t){const c=document.createElement("div");c.className="op-title header-title m-b-24",c.textContent=t,n.appendChild(c)}const l=document.createElement("div");l.className="op-close cursor",n.appendChild(l),l.addEventListener("click",()=>{r(!1),s.to(n,{opacity:0,scale:.5,duration:.35,onComplete:function(){o.remove()}})},!1);const a=document.createElement("div");a.className="op-content",a.appendChild(e),n.appendChild(a),s.from(n,{opacity:0,scale:.5})},async connectMetaMask(t){t.innerHTML="Requesting",t.disabled=!0;try{await window.ethereum.request({method:"eth_requestAccounts"}).then(e=>{console.log("result",e),t.innerHTML="Connected",t.disabled=!0,[].forEach.call(document.querySelectorAll(".connected"),function(o){o.style.cssText="display:inline-block !important"})}).catch(e=>{throw console.log("promise error",e),e}),await ethereum.request({method:"eth_chainId"}).then(e=>{console.log("chain",e),e==137||e==80001?(initMarketMaker(),t.style.backgroundColor=""):(alert("You are not using Polygon chain. Please switch to Polygon network on your wallet."),console.log("Non-Polygon chain",e))})}catch(e){console.log("error",e),t.innerHTML="Connect to Wallet",t.disabled=!1}}};export{m as default};
